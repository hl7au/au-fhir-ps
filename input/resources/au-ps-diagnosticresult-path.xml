<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="au-ps-diagnosticresult-path"/>
  <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm">
    <valueInteger value="0"/>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-compliesWithProfile">
    <valueCanonical value="http://hl7.org/fhir/uv/ips/StructureDefinition/Observation-results-laboratory-pathology-uv-ips"/>
  </extension>
  <url value="http://hl7.org.au/fhir/ps/StructureDefinition/au-ps-diagnosticresult-path"/>
  <name value="AUPSPathologyResult"/>
  <title value="AU PS Pathology Result Observation"/>
  <status value="draft"/>
  <description value="This profile sets minimum expectations for an Observation resource that represents a pathology result associated with a patient in the context of a patient summary in an Australian context. It is based on the [AU Core Pathology Result Observation](https://build.fhir.org/ig/hl7au/au-fhir-core/StructureDefinition-au-core-diagnosticresult-path.html) profile, and applies the additional requirements from [Observation Results - Laboratory/Pathology (IPS)](https://build.fhir.org/ig/HL7/fhir-ips/StructureDefinition-Observation-results-laboratory-pathology-uv-ips.html)."/>
  <kind value="resource"/>
  <abstract value="false"/>
  <type value="Observation"/>
  <baseDefinition value="http://hl7.org.au/fhir/core/StructureDefinition/au-core-diagnosticresult-path"/>
  <derivation value="constraint"/>
  <differential>
    <element id="Observation">
      <path value="Observation"/>
      <constraint>
        <key value="ips-2"/>
        <severity value="error"/>
        <human value="At least one of these Observation elements shall be provided: &quot;value &quot;,  &quot;dataAbsentReason &quot;,  &quot;hasMember &quot; or  &quot;component &quot;"/>
        <expression value="value.exists() or hasMember.exists() or component.exists() or dataAbsentReason.exists()"/>
      </constraint>
      <constraint>
      <key value="ips-3"/>
        <severity value="error"/>
        <human value="If observation has components, at least one of these Observation.component elements shall be provided: &quot;value&quot;, or &quot;dataAbsentReason &quot;"/>
        <expression value="component.exists() implies (component.value.exists() or component.dataAbsentReason.exists())"/>
      </constraint>
    </element>
    <element id="Observation.status">
      <path value="Observation.status"/>
      <binding>
        <strength value="required"/>
        <valueSet value="http://hl7.org/fhir/uv/ips/ValueSet/results-status-uv-ips"/>
      </binding>
    </element>
    <element id="Observation.category">
      <path value="Observation.category"/>
      <type>
        <code value="CodeableConcept"/>
        <profile value="http://hl7.org/fhir/uv/ips/StructureDefinition/CodeableConcept-uv-ips"/>
      </type>
    </element>
    <element id="Observation.code">
      <path value="Observation.code"/>
      <type>
        <code value="CodeableConcept"/>
        <profile value="http://hl7.org/fhir/uv/ips/StructureDefinition/CodeableConcept-uv-ips"/>
      </type>
    </element>
    <element id="Observation.subject">
      <path value="Observation.subject"/>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://hl7.org.au/fhir/ps/StructureDefinition/au-ps-patient"/>
      </type>
    </element>
    <element id="Observation.subject.reference">
      <path value="Observation.subject.reference"/>
      <min value="1"/>
      <mustSupport value="true"/>
    </element>
    <element id="Observation.effective[x]">
      <path value="Observation.effective[x]"/>
      <type>
        <code value="dateTime"/>
      </type>
      <type>
        <code value="Period"/>
      </type>
    </element>
    <element id="Observation.performer">
      <path value="Observation.performer"/>
      <min value="1"/>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://hl7.org.au/fhir/ps/StructureDefinition/au-ps-practitioner" />
        <targetProfile value="http://hl7.org.au/fhir/ps/StructureDefinition/au-ps-practitionerrole"/>
        <targetProfile value="http://hl7.org.au/fhir/ps/StructureDefinition/au-ps-organization"/>
        <targetProfile value="http://hl7.org.au/fhir/ps/StructureDefinition/au-ps-patient"/>
        <targetProfile value="http://hl7.org.au/fhir/ps/StructureDefinition/au-ps-relatedperson"/>
      </type>
    </element>
    <element id="Observation.value[x]">
      <path value="Observation.value[x]"/>
      <type>
        <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support">
          <valueBoolean value="true" />
        </extension>
        <code value="Quantity"/>
      </type>
      <type>
        <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support">
          <valueBoolean value="true" />
        </extension>
        <code value="CodeableConcept"/>
        <profile value="http://hl7.org/fhir/uv/ips/StructureDefinition/CodeableConcept-uv-ips"/>
      </type>
      <type>
        <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support">
          <valueBoolean value="true" />
        </extension>
        <code value="string"/>
      </type>
      <type>
        <code value="boolean"/>
      </type>
      <type>
        <code value="integer"/>
      </type>
      <type>
        <code value="Range"/>
      </type>
      <type>
        <code value="Ratio"/>
      </type>
      <type>
        <code value="SampledData"/>
      </type>
      <type>
        <code value="time"/>
      </type>
      <type>
        <code value="dateTime"/>
      </type>
      <type>
        <code value="Period"/>
      </type>
    </element>
    <element id="Observation.interpretation">
      <path value="Observation.interpretation"/>
      <type>
        <code value="CodeableConcept"/>
        <profile value="http://hl7.org/fhir/uv/ips/StructureDefinition/CodeableConcept-uv-ips"/>
      </type>
    </element>
    <element id="Observation.hasMember">
      <path value="Observation.hasMember"/>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://hl7.org.au/fhir/ps/StructureDefinition/au-ps-diagnosticresult-path"/>
      </type>
    </element>
  </differential>
</StructureDefinition>
